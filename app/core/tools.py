TOOLS = [
    {
        "type": "function",
        "function": {
            "name": "add_memory_fact",
            "description": (
                "Добавляет один факт в таблицу memory_facts.\n"
                "Используй ТОЛЬКО для устойчивых, долгосрочных фактов о пользователе, которые с высокой вероятностью останутся актульными месяцами или годами.\n"
                "При надобности вызывай несколько раз. Только ты решаешь когда что-то добавить в память, поэтому НЕ ЖДИ ПРЯМОЙ ЗАДАЧИ ОТ ПОЛЬЗОВАТЕЛЯ."
            ),
            "parameters": {
                "type": "object",
                "properties": {
                    "scope": {
                        "type": "string",
                        "enum": ["core", "extended"],
                        "description": (
                            "'core' — это главные правила и факты.\n"
                            "'extended' — устойчивые факты.\n"
                            "Основная разница между core и extended - в core факты, которые никогда не изменятся."
                        )
                    },
                    "value": {
                        "type": "string",
                        "description": (
                            "Текстовое описание факта.\n"
                            "Примеры для extended:\n"
                            "- 'Глеб живёт в Железнодорожном'\n"
                            "- 'Глеб учится в МИИГАиКе на направлении информационная безопасность'\n"
                            "- 'Глеб любит игры с сильным сюжетом и сложным выбором'\n\n"
                            "Не используй для фактов, которые явно относятся к текущему моменту "
                            "('сейчас', 'пока', 'на данный момент' и т.п.)."
                        )
                    },
                    "importance": {
                        "type": "number",
                        "description": (
                            "Важность факта от 0.0 до 1.0.\n"
                            "- 0.7–1.0 — по-настоящему важные, долгосрочные вещи (место жительства, учёба, "
                            "ключевые интересы, значимые отношения).\n"
                            "- 0.3–0.6 — дополнительные, но полезные характеристики.\n"
                            "- Для фактов, похожих на текущие состояния или то, что может быстро измениться, "
                            "либо не используй add_memory_fact, либо ставь importance НЕ ВЫШЕ 0.3 и лучше используй add_episodic_memory.\n"
                        ),
                        "minimum": 0.0,
                        "maximum": 1.0
                    }
                },
                "required": ["scope", "value", "importance"]
            }
        }
    },
    {
        "type": "function",
        "function": {
            "name": "add_episodic_memory",
            "description": (
                "Сохраняет эпизод из диалога в таблицу episodic_memory.\n"
                "Используй для конкретных ситуаций и временных состояний: что происходило в разговоре, что пользователь делал/чувствовал/выбирал СЕЙЧАС, какие решения принимал."
            ),
            "parameters": {
                "type": "object",
                "properties": {
                    "text": {
                        "type": "string",
                        "description": (
                            "Краткое текстовое описание эпизода.\n"
                        )
                    },
                    "importance": {
                        "type": "number",
                        "description": (
                            "Важность эпизода от 0.0 до 1.0.\n"
                            "Чем выше значение, тем больше шанс, что эпизод будет подтягиваться позже как контекст.\n"
                            "Высокие значения (0.7+) используй только для действительно значимых поворотных моментов "
                            "в разговоре или важных признаний пользователя."
                        ),
                        "minimum": 0.0,
                        "maximum": 1.0,
                        "default": 0.5
                    }
                },
                "required": ["text"]
            }
        }
    },
    {
        "type": "function",
        "function": {
            "name": "search_web",
            "description": "Поиск информации в интернете. Используй этот инструмент, когда нужен доступ к актуальным фактам, статистике, документации, примерам кода, новостям или когда пользователь прямо просит «погугли», «поищи в интернете» и т.п. Формируй осмысленный поисковый запрос на том языке, на котором задан вопрос. При необходимости используй поисковые операторы (site:, filetype:, intitle:, inurl:) для более точного поиска. Не используй этот инструмент для простых общеизвестных фактов или задач, которые можно решить самостоятельно (арифметика, школьная алгебра и т.п.).",
            "parameters": {
                "type": "object",
                "properties": {
                    "query": {
                        "type": "string",
                        "description": "Поисковый запрос для интернета. Должен быть самодостаточной фразой, отражающей суть вопроса пользователя, при необходимости с операторами (например: \"site:miigaik.ru методичка по маятнику filetype:pdf\")."
                    },
                    "n_results": {
                        "type": "integer",
                        "description": "Желаемое количество наиболее релевантных результатов поиска (ссылок). Обычно 3–8 достаточно.",
                        "minimum": 1,
                        "maximum": 20,
                        "default": 5
                    },
                    "region": {
                        "type": "string",
                        "description": "Регион/язык поиска в формате cc-ll (например, \"ru-ru\", \"de-de\", \"us-en\"). Выбирай значение в зависимости от языка вопроса пользователя. Если не уверен — используй \"ru-ru\" для русских запросов и \"us-en\" для английских.",
                        "default": "ru-ru"
                    },
                    "safesearch": {
                        "type": "string",
                        "description": "Степень фильтрации нежелательного контента. \"on\" — максимально строгий фильтр, \"moderate\" — баланс (рекомендуется по умолчанию), \"off\" — без фильтрации.",
                        "enum": ["on", "moderate", "off"],
                        "default": "moderate"
                    },
                    "with_content": {
                        "type": "boolean",
                        "description": "Если true, то помимо ссылок и сниппетов инструмент попытается получить и короткий текст с самих страниц (обрезанный до разумного размера) для более точного ответа модели.",
                        "default": True
                    }
                },
                "required": ["query"]
            }
        }
    }
]


MAIN_TOOL = [
    # {
    #     "type": "function",
    #     "function": {
    #         "name": "top_tracks",
    #         "description": "Возвращает топ-треки пользователя из Spotify. Используй этот инструмент, когда пользователь хочет узнать свои самые прослушиваемые песни за определённый период времени.",
    #         "parameters": {
    #             "type": "object",
    #             "properties": {
    #                 "limit": {
    #                     "type": "integer",
    #                     "description": "Количество треков для возврата.",
    #                     "default": 10
    #                 },
    #                 "offset": {
    #                     "type": "integer",
    #                     "description": "Смещение для получения следующих треков.",
    #                     "default": 0
    #                 },
    #                 "time_range": {
    #                     "type": "string",
    #                     "description": "Период времени для получения топ-треков. Может быть \"short_term\", \"medium_term\" или \"long_term\".",
    #                     "enum": ["short_term", "medium_term", "long_term"],
    #                     "default": "medium_term"
    #                 }
    #             },
    #         }
    #     }
    # },
]